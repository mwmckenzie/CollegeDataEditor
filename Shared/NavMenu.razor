@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.AspNetCore.Components.WebAssembly.Hosting

@inject IWebAssemblyHostEnvironment _hostEnvironment

<MudPaper Height="100%" Width="250px" Class="d-flex flex-column flex-grow-1 align-content-space-between py-3"
          Elevation="0">
    <MudNavMenu>
        <MudNavLink Href="" 
                    Match="NavLinkMatch.All" 
                    Icon="@Icons.Material.Filled.Home">Home</MudNavLink>
        
            <AuthorizeView>
                <Authorized>
                    <MudNavLink Href="ProgramBrowser"
                                Match="NavLinkMatch.Prefix"
                                Icon="@Icons.Material.Filled.LibraryBooks">
                        Program Browser
                    </MudNavLink>
                </Authorized>
            </AuthorizeView>
            
            <AuthorizeView Roles="editor">
                <Authorized>
                    <MudNavLink Href="ProgramEditorView"
                                Match="NavLinkMatch.Prefix"
                                Icon="@Icons.Material.Filled.LibraryBooks">
                        Program Editor
                    </MudNavLink>
                </Authorized>
            </AuthorizeView>
            
            <AuthorizeView>
                <Authorized>
                    <MudNavLink Href="schoolbrowser"
                                Match="NavLinkMatch.Prefix"
                                Icon="@Icons.Material.Filled.LibraryBooks">
                        School Browser
                    </MudNavLink>
                </Authorized>
            </AuthorizeView>

        <AuthorizeView Roles="editor">
            <Authorized>
                <MudNavGroup Title="Collections" Icon="@Icons.Filled.Checklist" Expanded="false">
                    <MudNavLink Href="TagEditorView"
                                Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Edit">
                        Tag Editor
                    </MudNavLink>
                    <MudNavLink Href="SubjectEditorView"
                                Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Edit">
                        Subject Editor
                    </MudNavLink>
                    <MudNavLink Href="TopicEditorView"
                                Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Edit">
                        Topic Editor
                    </MudNavLink>
                    <MudNavLink Href="OrgTypeEditorView"
                                Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Edit">
                        Org Type Editor
                    </MudNavLink>
                    <MudNavLink Href="ProgramTypeEditorView"
                                Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Edit">
                        Program Type Editor
                    </MudNavLink>
                    <MudNavLink Href="CitizenshipEditorView"
                                Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Edit">
                        Citizenship Editor
                    </MudNavLink>
                    <MudNavLink Href="ResidenceEditorView"
                                Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Edit">
                        Residence Editor
                    </MudNavLink>
                </MudNavGroup>
            </Authorized>
        </AuthorizeView>
        
        
    </MudNavMenu>
    <MudElement Class="pa-4 mt-auto">
        <MudSwitch @bind-Checked="@isDarkMode" Color="Color.Primary"
                   T="bool" Label="Toggle Light/Dark Mode"
                   @onclick="ToggleDarkMode"/>
    </MudElement>
</MudPaper>

@code {

    [Parameter]
    public bool isDarkMode { get; set; }

    [Parameter]
    public EventCallback ToggleDarkMode { get; set; }

}